<!DOCTYPE html>
<html>

<head>
    <title>北京所有星巴克</title>
    <meta charset="UTF-8" />
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta tabindex="">
    <link rel="stylesheet" type="text/css" href="http://demo.ishowchina.com/apidemos/sourceLinks/style.css" />
    <script type="text/javascript" src="http://api.ishowchina.com/v4/webapi/js/auth?v=3.7.0&t=jsmap&ak=ec85d3648154874552835438ac6a02b2"></script>
    <script type="text/javascript" src="http://demo.ishowchina.com/apidemos/sourceLinks/massdata.js"></script>
</head>

<body>
    <div id="map" class="map_contaner"></div>
    <script type="text/javascript">
    var map, pointCollection = null;

    function initMap() {
        map = new IMAP.Map("map", {
            minZoom: 4, //最小地图级别
            maxZoom: 18, //最大地图级别
            zoom: 12, //初始化级别
            center: new IMAP.LngLat(116.40976, 39.90131) //中心点坐标
        });

        // 添加海量点数据
        var starbucks = [
            [39.91651711, 116.45904779],
            [39.916213, 116.356562],
            [39.825417, 116.280763],
            [39.921807, 116.165903],
            [39.982031, 116.309041],
            [39.917345, 116.452914],
            [40.034806, 116.499506],
            [39.864819, 116.371941],
            [39.996022, 116.474245],
            [39.911546, 116.452438],
            [39.897927, 116.315808],
            [39.907286, 116.346915],
            [39.992233, 116.326134],
            [39.934214, 116.443735],
            [39.913257, 116.485109],
            [40.007843, 116.375197],
            [39.933195, 116.448567],
            [39.976874, 116.309559],
            [39.948034, 116.45374],
            [39.906338, 116.464915],
            [39.918446, 116.443018],
            [39.869245, 116.383325],
            [39.95214, 116.318739],
            [39.983312, 116.319926],
            [39.856006, 116.440044],
            [39.870569, 116.358348],
            [40.052285, 116.556645],
            [39.895157, 116.412954],
            [40.085268, 116.531737],
            [40.052794, 116.29629],
            [39.92784, 116.454254],
            [39.970147, 116.429636],
            [39.86313, 116.372951],
            [39.836436, 116.279266],
            [39.957387, 116.284944],
            [39.786911, 116.321409],
            [39.924078, 116.592328],
            [39.843478, 116.378944],
            [39.863103, 116.373216],
            [39.909572, 116.367158],
            [39.981272, 116.299259],
            [39.865296, 116.287491],
            [39.911991, 116.403651],
            [39.906446, 116.43548],
            [39.914702, 116.45435],
            [39.996403, 116.461041],
            [39.930556, 116.351277],
            [40.074504, 116.60659],
            [39.957746, 116.435977],
            [39.887508, 116.652717],
            [39.989968, 116.40059],
            [39.83469, 116.372225],
            [39.958709, 116.461038],
            [39.90778, 116.474425],
            [39.892452, 116.470713],
            [39.908141, 116.40829],
            [39.887148, 116.335599],
            [39.76227, 116.179628],
            [39.91495, 116.444985],
            [40.076965, 116.606851],
            [39.909662, 116.454217],
            [40.029105, 116.326786],
            [39.906319, 116.458468],
            [39.980724, 116.305224],
            [39.966256, 116.455486],
            [40.06158, 116.541301],
            [39.907834, 116.369764],
            [39.913453, 116.405743],
            [39.885302, 116.413996],
            [39.907925, 116.406688],
            [39.915557, 116.359034],
            [39.950467, 116.457894],
            [39.915947, 116.452104],
            [39.906068, 116.442685],
            [40.046484, 116.292332],
            [39.914634, 116.488322],
            [39.920083, 116.454822],
            [39.947551, 116.47023],
            [39.952851, 116.372011],
            [39.88885, 116.650482],
            [40.009706, 116.462286],
            [39.944413, 116.458291],
            [39.906274, 116.469183],
            [39.966815, 116.404084],
            [39.940652, 116.347319],
            [39.891793, 116.454058],
            [39.947509, 116.470259],
            [39.919939, 116.431511],
            [39.86414, 116.372194],
            [39.978201, 116.310245],
            [39.947612, 116.470236],
            [39.957485, 116.285176],
            [40.04549, 116.426453],
            [39.924078, 116.592328],
            [39.947978, 116.467571],
            [40.230499, 116.18518],
            [39.952052, 116.349836],
            [39.924366, 116.597175],
            [39.862869, 116.373883],
            [39.911601, 116.42771],
            [39.876455, 116.479805],
            [39.897005, 116.411893],
            [39.686449, 116.314672],
            [39.984909, 116.485819],
            [40.007461, 116.480024],
            [39.967215, 116.364862],
            [40.093327, 116.197107],
            [40.046528, 116.274249],
            [40.124761, 116.587332],
            [39.952701, 116.223834],
            [40.427701, 116.544431],
            [39.912818, 116.453154],
            [39.912818, 116.453154],
            [39.912486, 116.453507],
            [39.989771, 116.428956],
            [40.313186, 116.623694],
            [39.997863, 116.472918],
            [39.771487, 116.357407],
            [39.894065, 116.369494],
            [39.931804, 116.4309],
            [39.991649, 116.462806],
            [39.911846, 116.270925],
            [40.076167, 116.589486],
            [39.834798, 116.37212],
            [40.045732, 116.350212],
            [40.230381, 116.185133],
            [39.907945, 116.466803],
            [39.905453, 116.344757],
            [39.864636, 116.419691],
            [39.920972, 116.426802],
            [39.950467, 116.457894],
            [39.903956, 116.453112],
            [40.644802, 117.262404],
            [39.974185, 116.484001],
            [39.993021, 116.398478],
            [39.907636, 116.407045],
            [39.988173, 116.474769],
            [39.931195, 116.451948],
            [39.916643, 116.445603],
            [39.969657, 116.44171],
            [39.914004, 116.414847],
            [40.057363, 116.40937],
            [40.019511, 116.460464],
            [39.937804, 116.343021],
            [39.923175, 116.512606],
            [40.031587, 116.409748],
            [39.861063, 116.433192],
            [39.961931, 116.448826],
            [39.911869, 116.272469],
            [39.910436, 116.475204],
            [39.937927, 116.425941],
            [39.979228, 116.3099],
            [39.997825, 116.381545],
            [40.057866, 116.409395],
            [40.051788, 116.292553],
            [40.125452, 116.644845],
            [40.046012, 116.425579],
            [39.894305, 116.454653],
            [39.977934, 116.454708],
            [39.881459, 116.291734],
            [39.755372, 116.154236],
            [39.975803, 116.472347],
            [39.916569, 116.445774],
            [39.991134, 116.332788],
            [39.907667, 116.445281],
            [39.922467, 116.426278],
            [39.908496, 116.404498],
            [39.981586, 116.307917],
            [39.906983, 116.290463],
            [40.055152, 116.608947],
            [39.892628, 116.368759],
            [39.816355, 116.28612],
            [40.06571, 116.541644],
            [39.893825, 116.315369],
            [39.789673, 116.333129],
            [39.992852, 116.450832],
            [39.729087, 116.336388],
            [39.923025, 116.513239],
            [39.896077, 116.387975],
            [39.906557, 116.338171],
            [39.931433, 116.447248],
            [39.907035, 116.299297],
            [39.922446, 116.432657],
            [39.955323, 116.45725],
            [39.970092, 116.440513],
            [39.975157, 116.476924],
            [39.891864, 116.441439],
            [39.904499, 116.637274],
            [39.914791, 116.413457],
            [40.094823, 116.283958],
            [39.994568, 116.486281],
            [39.907451, 116.352645],
            [39.912907, 116.534161],
            [39.954507, 116.45674],
            [40.005356, 116.4829],
            [39.907056, 116.299141],
            [39.86406, 116.37261],
            [39.865107, 116.299766],
            [39.791947, 116.499956],
            [40.079834, 116.582907],
            [39.998792, 116.480704],
            [39.979594, 116.306177],
            [39.955271, 116.452316],
            [39.906062, 116.415681],
            [39.933226, 116.318895],
            [39.908736, 116.434918],
            [39.936588, 116.320587],
            [39.881746, 116.266322],
            [40.078548, 116.588143],
            [39.956999, 116.281944],
            [39.969263, 116.485977],
            [39.985907, 116.418188],
            [39.918273, 116.450094],
            [39.920561, 116.43398],
            [39.904364, 116.353873],
            [39.938284, 116.397155],
            [39.932569, 116.385565],
            [39.907973, 116.464259],
            [40.039398, 116.394964],
            [39.957817, 116.282764],
            [40.087608, 116.53049],
            [39.926724, 116.454242],
            [39.902135, 116.24614],
            [39.895247, 116.411211],
            [39.906594, 116.338903],
            [39.911781, 116.470415],
            [39.734136, 116.132918],
            [39.915978, 116.355268],
            [39.985628, 116.473637],
            [40.000267, 116.347304],
            [39.882712, 116.660412],
            [40.064945, 116.341186],
            [39.904837, 116.357619],
            [39.924023, 116.594325],
            [39.887611, 116.259124],
            [39.989127, 116.426344],
            [39.896497, 116.413746],
            [40.054438, 116.610084],
            [40.230499, 116.18518],
            [39.997165, 116.283204],
            [39.91907, 116.35166],
            [39.89678, 116.391546],
            [39.863264, 116.374129],
            [40.035166, 116.302227],
            [39.950137, 116.54208],
            [40.053741, 116.610404],
            [40.074695, 116.606599],
            [39.91127, 116.297187],
            [40.029227, 116.340541],
            [39.947978, 116.467571],
            [39.906367, 116.440108],
            [39.786911, 116.321409],
            [39.991649, 116.462806],
            [39.989321, 116.399968]
        ];

        console.log('starbucks', starbucks.length)


        //加载711
        toggleAdd(starbucks, 'starbucks');

    }
    //加载海量点
    function toggleAdd(datas, type) {
        var newData = [];
        var icon = null; //定义自定义图片对象
        var static = "http://smartdata.b0.upaiyun.com/upload";

        for (var i = 0; i < datas.length; i++) {
            newData.push({ lnglat: new IMAP.LngLat(datas[i][1], datas[i][0]), data: { index: i } });
        }

        switch (type) {
            case 'starbucks':
                icon = new IMAP.Icon(static + "/starbucks24-24.png", {
                    size: new IMAP["Size"](42, 42)
                })
                break;
        }
        var options = {
            size: 1,
            shape: 1,
            alpha: 1,
            fillColor: '#ff0000',
            icon: icon,
            visible: true
        }

        //初始化并添加海量点
        pointCollection = new IMAP.PointCollection(newData, options); // 初始化PointCollection
        map.getOverlayLayer().addOverlay(pointCollection);
    }
    initMap();
    </script>
</body>

</html>